<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Chatbot Simple</title>
<style>
  #chatbot { position: fixed; bottom: 20px; right: 20px; width: 300px; font-family: Arial,sans-serif; }
  #chat-header { background: #007bff; color: white; padding: 10px; cursor: pointer; }
  #chat-body { display: none; border: 1px solid #007bff; padding: 10px; background: #fff; }
  #chat-messages { height: 200px; overflow-y: auto; margin-bottom: 10px; }
  #chat-input { width: 70%; padding: 5px; }
  #send-btn { padding: 5px 10px; }
</style>
</head>
<body>

<div id="chatbot">
  <div id="chat-header">Chat FAQ</div>
  <div id="chat-body">
    <div id="chat-messages"></div>
    <input type="text" id="chat-input" placeholder="Posez votre question...">
    <button id="send-btn">Envoyer</button>
  </div>
</div>

<script>
// Basculer l'affichage du chat
const chatHeader = document.getElementById('chat-header');
const chatBody = document.getElementById('chat-body');
chatHeader.addEventListener('click', () => {
  chatBody.style.display = chatBody.style.display === 'none' ? 'block' : 'none';
});

// Quelques FAQ simples
const faqs = [
  { keywords: ["délai", "intervention"], response: "Les délais sont de 24h maximum." },
  { keywords: ["paiement", "virement", "paypal"], response: "Nous acceptons PayPal et virement." }
];

// Normalisation simple
function normalizeText(text) {
  return text.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'').replace(/[.,!?']/g,'').trim();
}

// Vérifier si un message correspond aux mots-clés
function matchesKeywords(msg, keywords) {
  const userMsg = normalizeText(msg);
  return keywords.some(kw => {
    const kwNorm = normalizeText(kw);
    return kwNorm.split(/\s+/).every(word => userMsg.includes(word));
  });
}

// Envoyer un message
function sendMessage() {
  const chatMessages = document.getElementById('chat-messages');
  const input = document.getElementById('chat-input');
  const msg = input.value.trim();
  if(!msg) return;

  chatMessages.innerHTML += `<div><strong>Vous :</strong> ${msg}</div>`;

  let found = false;
  for(const faq of faqs){
    if(matchesKeywords(msg, faq.keywords)){
      chatMessages.innerHTML += `<div><strong>Bot :</strong> ${faq.response}</div>`;
      found = true;
      break;
    }
  }

  if(!found){
    chatMessages.innerHTML += `<div><strong>Bot :</strong> Votre question a été transmise à un administrateur.</div>`;
  }

  input.value = '';
  chatMessages.scrollTop = chatMessages.scrollHeight;
}

document.getElementById('send-btn').addEventListener('click', sendMessage);
document.getElementById('chat-input').addEventListener('keypress', e => { if(e.key==='Enter') sendMessage(); });
</script>

</body>
</html>
